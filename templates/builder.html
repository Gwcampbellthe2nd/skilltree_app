<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ tree_name }} - Skill Tree Builder</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/vis.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/vis.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/skilltree.js') }}"></script>
</head>
<body>

    <h1>{{ tree_name }} - Skill Tree Builder</h1>

    <div class="buttons">
        <button onclick="addNode()">Add Node</button>
        <button onclick="addEdge()">Add Edge</button>
        <button onclick="deleteSelected()">Delete Selected</button>
        <button onclick="saveGraph()">Save Graph</button>
        <a href="/" class="back-button" onclick="saveGraph()">‚Üê Back to Main Page</a>
    </div>

    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleFileImport(event)">

    <div id="container">
        <div id="skilltree"></div>
        <div id="notes">
            <h3 id="notesHeader">Select a Node to View Notes</h3>
            <textarea id="notesTextarea" placeholder="Write your notes here..." onblur="saveCurrentNotes()"></textarea>
            <button id="markCompleteButton" onclick="markNodeComplete()" disabled>Mark Complete</button>
            <button id="markNotCompleteButton" onclick="markNodeNotComplete()" disabled>Mark Not Complete</button>
        </div>
        
        
    </div>

    <script>
        const treeName = "{{ tree_name }}";
        initializeNetwork();
        addRootNode(treeName);
        loadGraph()
    </script>
    <!-- Custom Alert Modal -->
    <div id="customAlert" class="modal" style="display: none;">
        <div class="modal-content">
            <p id="alertMessage">test</p>
            <button class="alert-button" onclick="closeAlert()">OK</button>
        </div>
    </div>

    <!-- Node Rename Modal -->
    <div id="renameModal" class="modal" style="display: none;">
        <div class="modal-content">
            <p>Rename Node</p>
            <input type="text" id="renameInput" placeholder="Enter new name">
            <div class="modal-buttons">
                <button class="modal-button" onclick="confirmRename()">Rename</button>
                <button class="modal-button cancel-button" onclick="closeRenameModal()">Cancel</button>
            </div>
        </div>
    </div>



</body>
</html>
